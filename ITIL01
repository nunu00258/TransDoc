原題:ITIL Asset and Configuration Management in the Cloud
Created by 2019/10/08
-------------------------------------------------

■ITILとは
-------------------------------------------------
・ITSM機能の監査と認定の普遍的な標準を提供するISO/IEC20000に基づき、ITILは更に進歩する
・ITILは以下のITSMライフサイクルを記述する5つの項目で構成される
	- サービス戦略: 組織の目標と顧客のニーズを理解する
	- サービス設計: ビジネス目標を達成するためのサービス戦略を計画する
	- サービス移行: サポートされている新しいサービス環境への開発・導入
	- 継続的なサービス改善: サービスを段階的かつ大規模な改善を実現

・上記の各項目は企業が導入すべき機能に対応する
・資産(Asset)及び構成管理は、"サービス移行"の項目の一つ

■AWSクラウド導入フレームワーク
-------------------------------------------------
　AWS CAFはパブリッククラウド又はハイブリットクラウドによって提供される俊敏性(Agility)、
セキュリティ、コスト効果のメリットを受容できるようにするために、企業がITSMプラクティスを
近代化するために使用される。

・AWS CAFは以下の7つの観点で構成される
	- 人材:	適切なスキルを持つIT担当者を選択してトレーニングし、説明責任とSLA契約を結んだ
	      	デリバリーチームを作る
	- プロセス:	問題とプロジェクトを予算内でかつ、リスクを許容レベルに保ちながら予定通りに管理
	- セキュリティ:	組織のセキュリティプロセス、システム、及び担当者の構造と行動を包括的かつ
	              	厳格な方法を記述する
	- ビジネス:	IT投資の有効性を特定、分析、測定する
	- 達成:	計画されたIT機能とサービスに対する分析、定義、受容予測を実施
	- プラットフォーム: 最適なIT機能とサービスに必要なコアアーキテクチャの原理、標準、パターンを
	                   	を定義及び説明する
	- 運用: ハイブリットIT環境への移行、運用及び最適化により効率的かつ自動化されたITサービス管理を実現

・AWS CAFはクラウドベースのITインフラストラクチャでITSMを実装及び運用するための
　実湯的な運用アドバイスを提供しているエンタープライズITSMフレームワークの重要な補足


■クラウドでのAsset及び構成管理
-------------------------------------------------
　実際には、資産及び構成管理は"インシデント管理", "変更管理", "問題管理", "SLA管理"などの
他のITILプロセスと密接に連携している。
　ITILは資産を"サービス提供に携わるリソース及び機能"と定義している。
	資産の例:
		 - 仮想又は物理ストレージ
		 - 仮想又は物理サーバ
		 - ソフトウェアライセンス
		 - 内部チームメンバーに知られている文章化されていない情報

・ITILは構成アイテムを"ITサービスを提供するために管理する必要のある資産"と定義している。
・構成するすべてのアイテムは資産になるが、多くの資産は構成アイテムでは無い。
・構成アイテムの例として"仮想又は物理サーバ"や"ソフトウェアライセンス"が含まれる。
・すべて構成アイテムは変更管理の管理化にある必要がある。

	資産及び構成管理の目標は以下の通り:
		 - ITILプロセスはインシデントと問題を迅速に解決するために、正確な構成情報を提供して
		   意思決定(変更の承認、リリース計画など)をサポートする
		 - サービス及び資産の構成が、誤り及び不正確であることに起因するコンプライアンス違反、
		   品質の問題の数を最小限に抑える
		 - サービス及びインフラストラクチャコンポーネントを定義及び制御することで
		   構成情報の履歴、現在の状態、予定された計画に関する正確な構成情報を得る

	ビジネスにとっての価値は以下の通り:
		 - 資産のパフォーマンスを最適化することでサービス全体のパフォーマンスが改善される
		     例: サービスの停止やライセンス監査の違反に起因するリスクを軽減
		 - 資産及び構成管理はサービス、リリース、環境を正確に表すことができ、以下を可能にする
		   	 - 変更とリリースに関する改善計画
		   	 - インシデント及び問題解決への改善
		   	 - SLAと保証の達成
		   	 - 標準的かつ法的な規制の義務を遵守(不適格の減少)
		   	 - 追跡可能な変更履歴
		   	 - サービスにかかるコストの特定

　次の図は資産には"変更管理"に直接関連する"構成管理"の要素が含まれていることを示している。
　資産と"構成管理"は"変更管理"を支えている
　そうでなければ、ビジネスはリスクと不確実性の発生にさらされる

変更要求の発生と記録----変更を評価----変更の承認or拒否----変更項目の作成----変更の確認----変更の終了
   ↑                       ↑                  ↑               ↑             ↑               ↑
   ↓                       ↓                  ↓   新しいor変更のCIをデプロイ ↓               ↓
   ↓                       ↓                  ↓               ↓             ↓               ↓
記録と監査-------影響を受けるアイテムの特定-記録の更新--リリース及び環境を監視-アイテムの監査-記録の更新


■資産及び構成管理とAWS CAF
-------------------------------------------------
　ITILのサービス移行で扱われるほとんどの仕様と同様に資産と構成管理は
クラウドサービス管理機能の一つとしてAWS CAF運用概念がある

　人材とプロセスの変更はクラウドガバナンス検討又は運用の優秀性("Center of Excellence")
にてサポートされる必要があり、それはAWS CAFを使用してサービス移行を管理することです。
　ITSMの観点から見るとその操作は運用テーブルに沿っている必要がある、

　図二で示すように、AWS CAFはハイブリット環境での資産と構成管理アイテムの管理を行う

┌──基準──┐
│ポリシー    │
│原則        │
│テンプレート│
│定義        │
│パターン    │
│制約        │
└──────┘
        │        Presentation Layer:
        │           - サービスデスク
        │           - サービスポータル
        │           - APIs
        │        Service Integration(統合) Layer:
        │           - サービスマネジメント
        │           - ガバナンス
        │           - オペレーション
        │           - サービスカタログ
        └───→Environments Layer:
        ┌──── 1. 資産&CIs
        │         2. モニタリング
        │         3. ログ
        │         4. イベント
        ↓         5. アラート
┌ステータスー┐
│CMDB        │
│財務        │
│メトリクス  │
│レポート    │
│分析        │
└──────┘


■財務管理への影響
-------------------------------------------------
資産管理で最も重要な項目の一つは、財務管理プロセスでデータが扱えるようにすることです。
	 - 資本化と減価償却
	 - ソフトウェアライセンス管理
	 - コンプライアンス要件

　これらの活動には通常、包括的な資産のライフサイクル管理プロセスが必要となり、
莫大なコストと労力がかかります。
　ITをクラウドに移行する利点の一つには、取引の財務処理が資本支出型(CAPEX)から、
運用支出型(OPEX)に移行することです。

数ヶ月に及ぶ計画立案と減価償却に伴う大規模な資本支出(サーバー更新等)を廃止できます。


■構成管理データベースの作成
-------------------------------------------------
　構成管理データベース(CMDB)は、ITリソースの管理及び追跡を実施します。
　CMDBはエンタープライズなインフラストラクチャにてIT環境の論理モデルを提供し、
きめ細やかな制御を行えるようにし、意思決定を促進させます。

・少なくとも、CMDBには以下のものが含まれます。
	 - すべての構成アイテム(CI)に関連する属性を記録
	 - 異なるCI間の関係モデル
	 - サービスに影響を与えるすべてのインシデント、変更、問題の履歴

・従来のITシステムではCMDBを確立するために次のプロセスを実施します。
	 - CIの記録を作成するための検出ツールの導入
	 - CIの作成と更新を追跡するための包括的な変更管理プロセス
	 - BMC, Hewlett-Packard, ServiceNow等のITSMワークフローツールを使用して、
	   影響を受けるCIとインシデント及び問題管理データを統合管理

　これらのプロセスとツールはインシデント、問題、変更の影響だけでなく、
財務リソース、サービス可用性、キャパシティ管理に関する考慮を提供し、組織がIT環境を
より理解するのに役立ちます。

・クラウドリソースのCMDBを作成する際には、次のいくつかの課題があります。
	 - クラウドリソースプロビジョニング特有の動的な性質: これは定義済みのビジネスポリシー及び
	      AutoScaling等のアプリケーションアーキテクチャ構成上、リソースを自動的に作成・終了する
	 - エンタープライズCIであるクラウドリソースのデータを単一のログ管理システムの形式に記録及び
	   保管することの難しさ
	 - 企業のIT資産とCIの統合を困難にするShadow ITの発生

○クラウドリソースの構成管理インベントリ
　AWSの顧客がクラウドリソース用のCMDBを作成するために使用できる論理的なアプローチは二種類ある。

	・オプション1
     ↓↑↓↑↓
    ┌────┐←ー┌────┐
    [既存のCMDB]ー→[  Cloud   ]
    
     - 既存のCMDBフレームワークを変更しない
     - クラウド上でCI管理をプロビジョニングする必要がある
     - 間接的な追加運用が生じる恐れがある

	・オプション2
     ↓↑↓↑↓     ┌──────┐
    ┌────┐←ー[    Cloud     ]
    [既存のCMDB]ー→[【Cloud CMDB】]
     
     - 分散管理又は連携管理のCMDB
     - 既存のCMDBで間接的な追加運用の増加はなし
     - 統合及び運用上の考慮事項の発生

　AWS Configは顧客がクラウド上でCIを管理するのに役立ちます。これはAWSアカウントのAWSリソースの
詳細な設定値の表示を提供する。

・AWS Configを使用すると、顧客は以下のことができます。
	 - AWSアカウントに関連付けられたサポートされる全てのリソースのスナップショットの取得
	 - リソースの構成情報の取得
	 - リソースの変更履歴を取得
	 - リソースが作成、変更又は削除されるたびに通知の取得
	 - リソース間の関係の表示

　これらの情報はCIの検出、記録、変更追跡、コンプライアンス監査、セキュリティインシデント分析に
につながるためIT組織として重要です。
　顧客はAWS Configコンソールから、この情報にアクセスするかプログラムでCMDBに抽出できます。

　従来のシステムとの統合の例：
	エンタープライズサービス管理ソフトウェアとしてPaaSプロバイダーであるServiceNowがAWS Configと
	統合します。これはServiceNowのユーザが前述のオプション1として活用できることを意味しています。


■クラウド上での構成ライフサイクルの管理
-------------------------------------------------
　サービス資産及び構成管理の目標は、Ciライフサイクルを管理して全ての変更を追跡、記録することです。
　クラウドの重要な観点の一つはソフトウェアとインフラストラクチャの構成ライフサイクルが密接に
連携していることです。

　この章では、インスタンス、スタック及びアプリケーションに渡る構成ライフサイクルの観点について説明する。
	 - インスタンス作成テンプレート:
	     全てのIT組織には、IT環境上のインスタンスに対するセキュリティとコンプライアンス標準があります。
	     AMIはインスタンス作成を標準化する堅牢な方法の一つです。ユーザはAWS又はサードパーティが
	     提供する定義済みAMIかカスタムAMIを定義できます。
	     　インスタンスプロビジョニング用のAMIテンプレートを作成する際、
	     事前に定義したインスタンス構成及びプログラム的な手法で環境のアドインを定義できます。
	     　カスタムAMIでは一般的に基本となるOSバージョン、関連するセキュリティ、監視、
	     構成管理エージェントを規定する必要があります。
	 - インスタンスのライフサイクル管理:
	     IT環境で作成された全てのインスタンス及びリソースに対し実行される複数の
	     ライフサイクル管理制御があります。一般的にはパッチ管理、ポリシーの強化、
	     バージョンアップグレード、環境変数の変更等があります。これらの制御は手動で実行できますが、
	     殆どのIT組織は"Chef", "Puppet", "System Center Configuration Manager"などの構成管理ツールを
	     使用して実行します。AWSではこれらのツールと連携して一貫したエンタープライズ構成管理の
	     アプローチを提供します。
	 - 環境プロビジョニングテンプレート:
	     AWS CloudFormationは各テンプレートを個別にプロビジョニングする必要がなく、
	     一貫して冪等性を維持して複数環境(スタックと呼ばれる)をプロビジョングできる。
	     この際、各AWSサービスのプロビジョング順序や依存関係を存在を意識する必要はない。
	 - アプリケーション構成とライフサイクル管理:
	     今日のアジャイル開発の世界では開発チームは継続的インテグレーションと継続的デリバリー
	     (CI/CD)のベストプラクティスを活用しています。AWSではコード管理とデプロイのために
	     "Jenkins(CI)"や"GitHub"などのツールとシームレスな連携を提供している。CodePipeline, 
	     CodeDeploy, CodeCommit等のAWSサービスを使用して、アプリケーションのライフサイクルを
	     管理できます。 

■結論
-------------------------------------------------
サービス資産及び構成管理プロセスは、itシステムの正常なプロビジョニングとメンテナンスのための
重要なアクティビティで構成される。ライフサイクルを通じた構成アイテムの一貫した管理は、
効率的かつ効果的にシステムの健全性やパフォーマンスの提供につながります。
　AWSではアプリケーションスタックのベストプラクティスを様々なレベルのリソースで実現させます。
　AWSプラットフォームはツールの利用、自動化、インテグレーションによりIT組織の生産性を
大幅に向上させる。サービス資産と構成管理プロセスの実装の実現にはAWSとIT組織との適切な
責任共有が求められる。
