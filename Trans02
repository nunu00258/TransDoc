原題: ITIL Event Management in the Cloud
Create by 2019/10/09
-------------------------------------------------

■序文
-------------------------------------------------
　本書はITILのサービス運用のイベント管理の以下の分野の背景について記す。
	 - ITILのイベント管理
	 - AWS CAFについて
	 - クラウド固有なイベント管理のベストプラクティス

■ITILでのイベント管理
-------------------------------------------------
　ITILではイベントを"ITインフラ管理又はITサービスの提供において重要な検出及び発生事項"と定義する、
要は"イベント"はITシステムで生じたビジネスに影響を与える出来事です。

　"出来事"とは、環境の状態、セキュリティ侵入、警告、エラー、トリガー及び通常の動作などのビジネスに
影響を与えるうるものです。企業はこれらの出来事を監視する必要があり、自動化された方法を用いることで、
最小のダウンタイムで効率的かつ効果的に実行できシステムへの可視性を得られます。

　イベント管理の目的はイベントを検出し、それらに優先順位を付け分類して対処法を把握することです。

　実際には、イベント管理は中央監視ツールと共に使用され、サービス又は構成ツール、キャパシティ管理ツール、
専用の監視ツール等からイベントを登録します。イベント管理はインシデント管理、変更管理、課題管理、
サービスレベル管理等の他のITILプロセスの上位に位置する包括的な機能として扱われ、イベントの種類又は
優先度に応じて作業を分類します。

　AXELOSでは全てのイベントを登録されるわけでは有りません。管理するイベントを定義することは、
明示的かつ重要な判断です。イベントの関連性を定めたあと、サービスコンポーネントが実際にイベントを
起こし、これを監視ツールが検出できなければなりません。
　イベント管理プロセスは自動又は手動であろうとイベントに対して何を行うべきかを定義できなければならない。
この定義には"イベントの無視"、"ロギング"、"エスカレーション"などの形式があります。最終的には
イベント管理プロセスはイベントをレビューし、クローズしなければなりません。


■イベント管理とCAF
-------------------------------------------------
　ITILのサービス運用でカバーしている範囲と同じようにイベント管理はAWS CAF 運用ドメインの
クラウドサービス管理機能にて分類される。

もちろん、クラウドの先進的な技術に適切な管理が伴います。また、人材やプロセスの変更を含む
組織の変革が必要となります。このような変更はCAFを使用した移行を管理する"Cloud Governance forum"
または"Center of Excellence"によって支援される必要がある。


■ITサービスマネージャ向けのクラウド固有のイベント管理のベストプラクティス
-------------------------------------------------
　AWSは企業が独自のイベント管理インフラを作成するための基礎を提供する。これにより
クラウドサービスをオンプレ環境及び従来の環境と統合できます。ついでに、AWSはイベント管理を
サービスとしては提供していません。イベント管理が必要な企業は独自にイベント管理インフラを
デプロイ又は管理する必要があります。


■CloudWatchを使用したクラウド上のイベントのモニタリング、検出及び通知
-------------------------------------------------
　AWSはイベントの発行及び取得するツールを提供する。特にCloudWatch APIを使用して自動管理と
イベント管理インフラを統合できる。

CloudWatchはAWSリソースとAWSで実行されるアプリケーションをリアルタイムで監視します。また、
リソースとアプリケーションに対して計測する変数である"Metric"を収集及び追跡します。さらに。
CloudWatch Aleam(監視スクリプト)を定義したルールに基づいて監視リソースに通知を送信したり、
自動的に変更を実行できます。

CloudWatchを使用して、EC2インスタンスのCPU使用率とDisk I/Oを監視できます。次にこれらのデータを
使用して、増加した負荷を処理するために追加のインスタンスを起動する必要があるかどうかを判断
することができます。さらに、使用率の低いインスタンスを停止してコストを節約できます。(スケールイン)


AWS標準のメトリクス監視に加え、独自に定義したカスタムメトリクスを監視できます。アプリケーションから
算出したメトリクスを監視して、ビジネス需要の把握できます。CloudWatchを使用することで、
リソースの使用率、アプリケーションのパフォーマンス、運用の健全性をシステム全体で可視化できます。

　デフォルトではメトリクスと算出された統計情報はCloudWatchコンソールにグラフィカルに表示される。
これはAPI又はCLIツールを使用してこれらのメトリクスを取得できます。
　AutoScalingを使用する際は、特定の条件を満たすときにEC2インスタンスを停止、開始、終了する
アラームアクションを設定できます。
　更に、ユーザに変わってAutoScaling及びAmazon SNSアクションを実行するアラームを作成できます。

　独自のイベント管理インフラを持たない企業はCLoudWatchを使用して基本的なITILイベント管理を
実装できます。ただし、多くの大企業、特にハイブリットクラウド設計を実行している企業は
"BMC Remedy", "Microsoft System Center", "HP OpenView"などの製品を使用して独自のイベント管理
インフラを使用しています。

　CloudWatchをエンタープライズイベント管理インフラに統合するITサービス管理者は以下を考慮する必要がある。
	 - 適切なイベントが伝達されるか
	 - イベントは適切な粒度で追跡されるか
	 - トリガー、制限、イベント処理のルールを確認及び更新するメカニズムがあるか

●AWSでのモニタリングのベストプラクティス
-------------------------------------------------
小さな問題が大きくなるまえに監視を優先させる必要があります。
	→監視タスクを可能限り自動化することです。

特に、以下のログファイルを確認します
	 - Amazon EC2
	 - Amazon S3
	 - Amazon RDS etc..

　AWSソリューションの全てからデータを収集して監視する機能を実装して、(マルチポイントでの障害を
より特定しやすくする。

監視の計画では以下の問いに対処する必要があります。
	 - 監視の目標とは
	 - どのリソースを監視するか
	 - リソースの監視する頻度は
	 - どの監視ツールを使用するか
	 - 監視タスクを行うのは誰か
	 - 何か問題が発生した際に、誰が通知を受け取るべきか

●インシデント管理
----------------------------------------
　警告又は例外として分類されたイベントはインシデント管理プロセスを実施する場合があります。
これらのプロセスは通常のサービス運用に可能な限り迅速に復旧し、ビジネス運用への悪影響を
最小限にとどめます。

ITILプロセスでは、エラーを課題管理台帳又は構成管理台帳(CMDB)を参照して、解決を試みます。
これらの記録にない場合はインシデントに分類して、インシデント管理に記帳します。
インシデント管理は通常、ほとんどの一般的なインシデントを解決できる最初のサポート専門家で
構成されます。

インシデントが解決できない場合は、上位にエスカレーションを行い、インシデントが解決できまで
プロセスを続行します。インシデント管理はサービスの低下及びダウンタイムを最小限に抑えるために
インシデントの迅速な解決策を見つけ出そうとします。

適切に設計されたクラウドインフラは障害に対する回復力がはるかに高いことに注意してください。
本番の環境フェイルオーバーの実施が失敗するインシデントが生成される可能性は低いです。
根本的な問題は課題管理を通じて解決できます。

●インシデント管理のベストプラクティス
-----------------------------
クラウドと統合したインシデント管理は以下のパラメータを定義する必要があります。
	 - 携わる従業員がAWS運用とサービス運用(e.g. EC2と実行されるビジネスアプリ)を理解する必要がある
	 - 携わる従業員とプロセスがAWSで運用するサービスに関連するSLAを把握し、それらのSLAを
	     を既存のエンタープライズインシデント管理インフラに組み込まなければならない
	 - AWSインフラで実行される企業が運営するサービスの明示的なSLA(復旧時間を含む)を定義する
	 - AWSインフラで実行される全てのサービスのインシデントの重要度と優先度を定義する、
	 - AWSのエンタープライズサポートに登録し、インシデント発生中にAmazonテクニカルアカウントマネージャー
	     (TAM)が行う対処に同意する。
	 - インフラがコードとして定義されているクラウド環境では、標準のデバッグ作業よりも、
	     一度、Terminatedして再起動したほうがインシデント復旧しやすい可能性があることを留意する
	 - 可能であらば、インシデントの修正は人間の介入無しで自動的に行われると望ましい
	 - 人間の介入が必要な場合は、その介入は単純で、ほとんどが同化されたRunbookステップです。
	 
●課題管理
-----------------------------
課題管理は繰り返し発生するインシデント防ぐことを目的として、全ての問題のライフサイクルを管理する
プロセスです。インシデント管理の目標は復旧することですが、問題管理は根本的な問題を解決して
インシデントが再発しないようにして、組織がインシデントの影響を最小限にできるように問題と関連する
ソリューションに関する情報を保持します。

　ハイブリット環境を運用している企業は独自の問題管理インフラをもっている可能性があります。統合の
目標はAWSに関連する問題の対処するプロセスを既存の問題管理インフラにシームレスに統合することです。

■結論
-------------------------------------------
クラウドい移行する企業はITILの特にイベント管理について既存の資産を活用できます。
クラウド運用モデルは従来のITILと一貫しています。
本書では提案された一連のベストプラクティスを提供してコンプライアンスを継続して維持できます。
